{% extends "base.html" %}
{% block content %}
<div class="page-header d-flex justify-content-between align-items-center">
    <div>
        <h2><i class="bi bi-calendar-week"></i> Timetable: {{ cls.grade }}-{{ cls.section }}</h2>
    </div>
    <div>
        <a href="{{ url_for('admin.add_timetable_entry', class_id=cls.id) }}" class="btn btn-primary"><i
                class="bi bi-plus-lg"></i> Add Entry</a>
        <a href="{{ url_for('admin.timetable') }}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i>
            Back</a>
    </div>
</div>

<div class="card">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-dark table-bordered mb-0">
                <thead>
                    <tr>
                        <th>Time</th>
                        {% for day in days %}
                        <th class="text-center">{{ day }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% set times = ['08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00'] %}
                    {% for time in times %}
                    <tr>
                        <td><strong>{{ time }}</strong></td>
                        {% for day in days %}
                        <td class="text-center">
                            {% for entry in timetable %}
                            {% if entry.day_of_week == day and entry.start_time.strftime('%H:%M') == time %}
                            <div class="timetable-slot">
                                <strong>{{ entry.subject.name }}</strong><br>
                                <small>{{ entry.teacher.first_name }}</small>
                            </div>
                            {% endif %}
                            {% endfor %}
                        </td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    .timetable-slot {
        background: var(--bg-input);
        padding: 0.5rem;
        border-radius: 8px;
        font-size: 0.8rem;
        border: 1px solid var(--border-color);
        color: #ffffff;
    }
</style>
{% endblock %}